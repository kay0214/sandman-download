<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>管理员首页-Sandman影片分享</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" href="/icon/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/icon/favicon.ico" type="image/x-icon"/>
    <meta name="keywords" content="sandman,download,影片分享">
    <meta name="description" content="Sandman影片分享">
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/css/global.css">
</head>
<body>
<div th:replace="common/header :: admin"></div>
<div th:replace="admin/admin_header :: index"></div>

<div class="layui-container">
    <div class="layui-row layui-col-space15">
        <!-- 购买报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe601; </i>影片购买量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${buy.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${buy.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${buy.month}"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 活跃用户报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe6af; </i>活跃用户量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${active.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${active.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${active.month}"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 注册用户报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe770; </i>注册用户量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${register.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${register.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${register.month}"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 留言报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe66e; </i>留言量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${findPlz.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${findPlz.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${findPlz.month}"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 趋势图 -->
    <div class="layui-row">
        <div class="layui-card">
            <div class="layui-card-header"><i class="layui-icon"> &#xe629; </i>数据概览</div>
            <div class="layui-card-body">
                <div id="main" class="line-report"></div>
            </div>
        </div>
    </div>
</div>
<!--<div th:replace="common/css3::html"></div>-->
<script src="/layui/layui.js"></script>
<script src="/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/footer.js"></script>
<script src="/echarts/echarts.min.js"></script>
<script type="text/javascript">
    // 初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));

    $.ajax({
        type: "get",
        url: "/admin/overview",
        async: false,
        success: function (data) {
            var legend = data.data.legend;
            var date = data.data.date;
            var colors = ['#FF0000', '#1C86EE', '#00FF7F','#EEEE00'];
            // 指定图表的配置项和数据
            var option = {
                color: colors,
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:legend
                },
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: true},
                        magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                xAxis : [
                    {
                        type : 'category',
                        boundaryGap : false,
                        axisPointer: {
                            label: {
                                formatter: function (params) {
                                    return params.value
                                        + (params.seriesData.length ? '日数据如下：' : '');
                                }
                            }
                        },
                        data : date
                    }

                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:legend[0],
                        type:'line',
                        smooth: true,
                        data:data.data.data[0].data
                    },
                    {
                        name:legend[1],
                        type:'line',
                        smooth: true,
                        data:data.data.data[1].data
                    },
                    {
                        name:legend[2],
                        type:'line',
                        smooth: true,
                        data:data.data.data[2].data
                    }
                ]
            };

            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);

        }
    });

</script>
<script src="/js/global.js"></script>
</body>
</html>