<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>首页-sandman资源共享平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" href="/icon/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/icon/favicon.ico" type="image/x-icon"/>
    <meta name="keywords" content="sandman,download,资源共享">
    <meta name="description" content="sandman资源共享平台">
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/css/global.css">
</head>
<body>
<div th:replace="common/header :: admin"></div>
<div th:replace="admin/admin_header :: index"></div>

<div class="layui-container">
    <div class="layui-row layui-col-space15">
        <!-- 上传报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe67c; </i>资源上传量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${upload.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${upload.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${upload.month}"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 下载报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe601; </i>资源下载量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${download.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${download.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${download.month}"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 活跃用户报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe6af; </i>活跃用户量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${active.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${active.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${active.month}"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 注册用户报表 -->
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon"> &#xe770; </i>注册用户量<span class="layui-badge layui-bg-blue sandman-admin-report-label">日</span></div>
                <div class="layui-card-body">
                    <!-- 日量 -->
                    <div class="text-align-center">
                        <p><h1 th:text="${register.day}"></h1></p>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-green">周</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${register.week}"></div>
                    </div>
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-md1 layui-col-md-offset2"><span class="layui-badge layui-bg-orange">月</span></div>
                        <div class="layui-col-md4 layui-col-md-offset5" th:text="${register.month}"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 趋势图 -->
    <div class="layui-row">
        <div class="layui-card">
            <div class="layui-card-header"><i class="layui-icon"> &#xe629; </i>数据概览</div>
            <div class="layui-card-body">
                <div id="main" class="line-report"></div>
            </div>
        </div>
    </div>
</div>
<!--<div th:replace="common/css3::html"></div>-->
<script src="/layui/layui.js"></script>
<script src="/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/footer.js"></script>
<script src="/echarts/echarts.min.js"></script>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));

    // 指定图表的配置项和数据
    var colors = ['#5793f3', '#d14a61', '#675bba'];

    option = {
        color: colors,

        tooltip: {
            trigger: 'none',
            axisPointer: {
                type: 'cross'
            }
        },
        legend: {
            data:['2015 降水量', '2016 降水量']
        },
        grid: {
            top: 70,
            bottom: 50
        },
        xAxis: [
            {
                type: 'category',
                axisTick: {
                    alignWithLabel: true
                },
                axisLine: {
                    onZero: false,
                    lineStyle: {
                        color: colors[1]
                    }
                },
                axisPointer: {
                    label: {
                        formatter: function (params) {
                            return '降水量  ' + params.value
                                + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                        }
                    }
                },
                data: ["2016-1", "2016-2", "2016-3", "2016-4", "2016-5", "2016-6", "2016-7", "2016-8", "2016-9", "2016-10", "2016-11", "2016-12"]
            },
            {
                type: 'category',
                axisTick: {
                    alignWithLabel: true
                },
                axisLine: {
                    onZero: false,
                    lineStyle: {
                        color: colors[0]
                    }
                },
                axisPointer: {
                    label: {
                        formatter: function (params) {
                            return '降水量  ' + params.value
                                + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                        }
                    }
                },
                data: ["2015-1", "2015-2", "2015-3", "2015-4", "2015-5", "2015-6", "2015-7", "2015-8", "2015-9", "2015-10", "2015-11", "2015-12"]
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: [
            {
                name:'2015 降水量',
                type:'line',
                xAxisIndex: 1,
                smooth: true,
                data: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3]
            },
            {
                name:'2016 降水量',
                type:'line',
                smooth: true,
                data: [3.9, 5.9, 11.1, 18.7, 48.3, 69.2, 231.6, 46.6, 55.4, 18.4, 10.3, 0.7]
            }
        ]
    };


    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>
<script src="/js/global.js"></script>
<script th:inline="javascript">
    var count = [[${count}]];
    var currPage = [[${currPage}]];
    currPage = (currPage == null || currPage == undefined || currPage == 0)?1:currPage;
</script>
<script>
    layui.use('laypage', function(){
        var laypage = layui.laypage;
        //执行一个laypage实例
        laypage.render({
            elem: 'page', //注意，这里的 test1 是 ID，不用加 # 号
            count: count, //数据总数，从服务端得到
            curr: currPage,
            layout: ['count', 'prev', 'page', 'next', 'skip'],
            jump: function(obj, first){

                //首次不执行,其他的执行
                if(!first){
                    location.href = "/resource/list?currPage=" + obj.curr;
                }
            }
        });
    });
</script>
</body>
</html>